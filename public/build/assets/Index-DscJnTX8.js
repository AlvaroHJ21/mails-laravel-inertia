import{r as l,u as p,j as e,a as v,M as b,y as h}from"./app-B_rF6PDn.js";import{A as C}from"./AuthenticatedLayout-CXyECC_P.js";import{A as w,f as u,e as N,v as S,a as F}from"./formatDate-CPiH94ir.js";import{B as A}from"./Button-CM7ovodO.js";import{F as E}from"./Form-Crj3txA2.js";import{e as M}from"./excel-BG5q7fmZ.js";function y(a){const i=new Date(a),t=i.getHours(),r=i.getMinutes();return`${t<10?"0"+t:t}:${r<10?"0"+r:r}`}function H(a){const{auth:i,campanias:t}=a,[r,n]=l.useState(""),[x,c]=l.useState(),d=p();l.useEffect(()=>(a.flash.message&&(n("Form"),c(t[t.length-1])),()=>{}),[]);function j(s){d.openConfirm({title:"Confirmar",message:"¿Estás seguro de eliminar esta campaña?",buttonText:"Eliminar",buttonVariant:"error",onConfirm(){h.delete(route("campanias.destroy",s.id)),d.cancel()}})}function f(s){d.openConfirm({title:"Confirmar",message:"¿Estás seguro de enviar esta campaña?",buttonText:"Sí, enviar",buttonVariant:"primary",onConfirm(){h.post(route("campanias.send",{campania:s}),{},{onSuccess(o){console.log(o)},onError(o){console.log(o)}}),d.cancel()}})}return e.jsxs(C,{user:i.user,children:[e.jsx(v,{title:"Programación de campañas"}),e.jsx("h1",{className:"title",children:"Programación de Cámpañas"}),e.jsx(w,{text:`Nuestro módulo de perfilamiento de clientes permite conocer el perfil demográfico de los clientes, para ello es necesario
subir un listado de Documentos de Identidad (DNI), con un formato prestablecido de un archivo.`}),e.jsx("div",{className:"w-full mb-6 overflow-x-auto bg-white rounded-lg shadow-md",children:e.jsxs("table",{className:"table table-blue",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Campaña"}),e.jsx("th",{children:"Fecha de creación"}),e.jsx("th",{children:"Fecha de envío"}),e.jsx("th",{children:"Hora de envío"}),e.jsx("th",{children:"Cantidad de registros"}),e.jsx("th",{children:"Listado de ingreso"}),e.jsx("th",{children:"Documentos adjuntos"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:t.map(s=>{var o;return e.jsxs("tr",{children:[e.jsx("td",{children:s.nombre}),e.jsx("td",{children:u(s.created_at)}),e.jsx("td",{children:u(s.fecha_envio)}),e.jsx("td",{children:y(s.fecha_envio)}),e.jsx("td",{children:s.personas.length}),e.jsx("td",{children:e.jsx("a",{href:route("campanias.download",{campania:s}),className:"btn btn-sm",children:e.jsx("img",{src:M,alt:"icono de excel",width:24})})}),e.jsx("td",{children:(o=s.archivos_adjuntos)==null?void 0:o.map((g,m)=>e.jsxs("a",{href:route("campanias.download_attached",{adjunto:g,campania_id:s.id}),className:"block text-celeste-claro hover:underline",children:["Archivo ",m+1]},m))}),e.jsx("td",{children:e.jsxs("div",{className:"flex w-20 gap-1",children:[e.jsx("button",{onClick:()=>f(s),children:e.jsx("img",{src:N,alt:"icono de play",width:24})}),e.jsx("button",{onClick:()=>{n("Form"),c(s)},children:e.jsx("img",{src:S,alt:"icono de ver",width:24})}),e.jsx("button",{onClick:()=>j(s),children:e.jsx("img",{src:F,alt:"icono de eliminar",width:24})})]})})]},s.id)})})]})}),e.jsx(A,{onClick:()=>{n("Form"),c(void 0)},className:"m-auto",children:"Generar nueva campaña"}),e.jsx(b,{show:r==="Form",onClose:()=>n(""),maxWidth:"2xl",children:e.jsx(E,{campania:x,onClose:()=>n("")})})]})}export{H as default};
