import{r as d,u as p,j as e,a as g,M as v,y as m}from"./app-Bevju4P9.js";import{A as b}from"./AuthenticatedLayout-B5L0gttd.js";import{A as C}from"./Alert-Cc7e9Ry6.js";import{B as w}from"./Button-BX1XZ55b.js";import{F as N}from"./Form-w3n3D31j.js";import{f as h,e as S,v as E,a as F}from"./formatDate-CXqeFNCc.js";import{e as M}from"./excel-BG5q7fmZ.js";function A(i){const l=new Date(i),t=l.getHours(),r=l.getMinutes();return`${t<10?"0"+t:t}:${r<10?"0"+r:r}`}function H(i){const{auth:l,campanias:t}=i,[r,n]=d.useState(""),[u,c]=d.useState(),a=p();d.useEffect(()=>(i.flash.message&&(n("Form"),c(t[t.length-1])),()=>{}),[]);function x(s){a.openConfirm({title:"Confirmar",message:"¿Estás seguro de eliminar esta campaña?",buttonText:"Eliminar",buttonVariant:"error",onConfirm(){m.delete(route("campanias.destroy",s.id)),a.cancel()}})}function f(s){a.openConfirm({title:"Confirmar",message:"¿Estás seguro de enviar esta campaña?",buttonText:"Sí, enviar",buttonVariant:"primary",onConfirm(){m.post(route("campanias.send",{campania:s}),{},{onSuccess(o){console.log(o),window.toast.success(o.props.flash.message)},onError(o){console.log(o)}}),a.cancel()}})}function j(s){m.post(route("campanias.report",{campania:s}),{},{onSuccess(o){console.log(o),window.toast.success(o.props.flash.message)},onError(o){console.log(o)}}),a.cancel()}return e.jsxs(b,{user:l.user,children:[e.jsx(g,{title:"Programación de campañas"}),e.jsx("h1",{className:"title",children:"Programación de Cámpañas"}),e.jsx(C,{text:`Nuestro módulo de perfilamiento de clientes permite conocer el perfil demográfico de los clientes, para ello es necesario
subir un listado de Documentos de Identidad (DNI), con un formato prestablecido de un archivo.`}),e.jsx("div",{className:"w-full mb-6 overflow-x-auto bg-white rounded-lg shadow-md",children:e.jsxs("table",{className:"table table-blue",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Campaña"}),e.jsx("th",{children:"Fecha de creación"}),e.jsx("th",{children:"Fecha de envío"}),e.jsx("th",{children:"Hora de envío"}),e.jsx("th",{children:"Cantidad de registros"}),e.jsx("th",{children:"Listado de ingreso"}),e.jsx("th",{children:"Acciones (Manuales)"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:t.map(s=>e.jsxs("tr",{children:[e.jsx("td",{children:s.nombre}),e.jsx("td",{children:h(s.created_at)}),e.jsx("td",{children:h(s.fecha_envio)}),e.jsx("td",{children:A(s.fecha_envio)}),e.jsx("td",{children:s.personas.length}),e.jsx("td",{children:e.jsx("a",{href:route("campanias.download",{campania:s}),className:"btn btn-sm",children:e.jsx("img",{src:M,alt:"icono de excel",width:24})})}),e.jsx("td",{children:e.jsxs("div",{className:"flex w-20 gap-1",children:[e.jsx("button",{onClick:()=>f(s),children:e.jsx("img",{src:S,alt:"icono de play",width:24})}),e.jsx("button",{onClick:()=>j(s),className:"rounded-full w-7 h-7 bg-amarillo text-azul-marino",children:e.jsx("i",{className:"fa fa-bar-chart"})})]})}),e.jsx("td",{children:e.jsxs("div",{className:"flex w-20 gap-1",children:[e.jsx("button",{onClick:()=>{n("Form"),c(s)},children:e.jsx("img",{src:E,alt:"icono de ver",width:24})}),e.jsx("button",{onClick:()=>x(s),children:e.jsx("img",{src:F,alt:"icono de eliminar",width:24})})]})})]},s.id))})]})}),e.jsx(w,{onClick:()=>{n("Form"),c(void 0)},className:"m-auto",children:"Generar nueva campaña"}),e.jsx(v,{show:r==="Form",onClose:()=>n(""),maxWidth:"2xl",children:e.jsx(N,{campania:u,onClose:()=>n("")})})]})}export{H as default};
