import{r as c,j as e,a as j,y as u}from"./app-BCCgbaEy.js";import{A as f,f as p,e as g,v,a as b}from"./formatDate-DFdNzCoA.js";import{A as w}from"./AuthenticatedLayout-CuX9Xg-P.js";import S from"./FormUpload-DRoTJqAc.js";import N from"./Index-CSVj13C9.js";import{M as m}from"./Modal-42lmsfOv.js";import{e as F}from"./excel-BG5q7fmZ.js";import"./transition-b3MWsbJg.js";import"./Button-eyn-2V7n.js";import"./TextEditable-DDW59Xi7.js";import"./FilterGroups-DsBULIqN.js";import"./FilterGroupTable-DBNJ1q-i.js";import"./Preview-B9_p6kQ7.js";import"./useFormFilter-B3kB8Sj2.js";function C(s){const o=s.filtros;let i=[...s.personas];return o.forEach(a=>{a.filters.length>0&&(i=i.filter(r=>a.filters.some(n=>r[a.attr]&&n.value.toLowerCase()===r[a.attr].toString().toLowerCase())))}),i.length}function U(s){const{auth:o,segmentos:i}=s,[a,r]=c.useState(""),[n,d]=c.useState();function h(t){confirm("¿Estás seguro de eliminar este segmento?")&&u.delete(route("segmentos.destroy",{segmento:t}))}return e.jsxs(w,{user:o.user,children:[e.jsx(j,{title:"Sementación"}),e.jsx("h1",{className:"title",children:"Segmentación"}),e.jsx(f,{text:`Nuestro módulo de Generación de segmentos permite diseñar un segmento de clientes de interés en función a variables demográficas e información
interna de los clientes , para ello es necesario subir un listado de Documentos de Identidad (DNI), con un formato prestablecido de un archivo.`}),e.jsx("div",{className:"w-full mb-6 overflow-x-auto bg-white rounded-lg shadow-md",children:e.jsxs("table",{className:"table table-blue",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Segmento"}),e.jsx("th",{children:"Fecha de creación"}),e.jsx("th",{children:"Cantidad de registros"}),e.jsx("th",{children:"Listado de ingreso"}),e.jsx("th",{children:"Filtros"}),e.jsx("th",{children:"Programar campaña"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map(t=>e.jsxs("tr",{children:[e.jsx("td",{children:t.nombre}),e.jsx("td",{children:p(t.created_at)}),e.jsx("td",{children:C(t)}),e.jsx("td",{children:e.jsx("a",{href:route("segmentos.download",{segmento:t}),className:"btn btn-sm",children:e.jsx("img",{src:F,alt:"icono de excel",width:24})})}),e.jsx("td",{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:t.filtros.map(x=>x.filters.map(l=>e.jsx("span",{className:"badge",children:l.text},l.text)))})}),e.jsx("td",{children:e.jsx("button",{children:e.jsx("img",{src:g,alt:"icono de ver",width:24})})}),e.jsx("td",{children:e.jsxs("div",{className:"flex w-20 gap-1",children:[e.jsx("button",{onClick:()=>{r("Preview"),d(t)},children:e.jsx("img",{src:v,alt:"icono de ver",width:24})}),e.jsx("button",{onClick:()=>h(t),children:e.jsx("img",{src:b,alt:"icono de eliminar",width:24})})]})})]},t.id))})]})}),e.jsx("button",{onClick:()=>r("Form"),className:"m-auto btn btn-primary",children:"Generar nuevo segmento"}),e.jsx(m,{show:a=="Form",onClose:()=>r(""),maxWidth:"xs",children:e.jsx(S,{onSended:t=>{r("Preview"),d(t)}})}),e.jsx(m,{show:a=="Preview",onClose:()=>r(""),maxWidth:"xl",children:n&&e.jsx(N,{segmento:n,onSaved:()=>r(""),departamentos:s.departamentos,distritos:s.distritos,provincias:s.provincias})})]})}export{U as default};
