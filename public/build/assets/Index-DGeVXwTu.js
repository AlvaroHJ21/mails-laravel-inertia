import{r as n,u,j as e,a as f,M as o,y as l}from"./app-B_rF6PDn.js";import{A as p}from"./AuthenticatedLayout-CXyECC_P.js";import b from"./FormUpload-BwogrK4V.js";import g from"./FormView-sJ0Xongh.js";import{A as v,f as C,e as w,v as N,a as S}from"./formatDate-CPiH94ir.js";import{e as y}from"./excel-BG5q7fmZ.js";import"./Button-CM7ovodO.js";import"./TextEditable-CGjSXBz8.js";function I(d){const{auth:c,perfiles:m}=d,[a,t]=n.useState(""),[i,h]=n.useState(),s=u();function x(r){s.openConfirm({title:"Confirmar",message:"¿Estás seguro de eliminar este perfil?",buttonText:"Eliminar",buttonVariant:"error",onConfirm(){l.delete(route("perfiles.destroy",{perfil:r})),s.cancel()}})}function j(r){s.openConfirm({title:"Confirmar",message:"¿Estás seguro de crear una campaña a partir de los datos de este perfil?",buttonText:"Sí, crear",buttonVariant:"primary",onConfirm(){l.post(route("campanias.store_by_perfil",{perfil:r}),{},{}),s.cancel()}})}return e.jsxs(p,{user:c.user,children:[e.jsx(f,{title:"Perfiles"}),e.jsx("h1",{className:"title",children:"Perfilamiento de clientes"}),e.jsx(v,{text:`Nuestro módulo de perfilamiento de clientes permite conocer
                    el perfil demográfico de los clientes, para ello es
                    necesario subir un listado de Documentos de Identidad (DNI),
                    con un formato prestablecido de un archivo.`}),e.jsx("div",{className:"w-full mb-6 overflow-x-auto bg-white rounded-lg shadow-md",children:e.jsxs("table",{className:"table table-blue",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{children:"Perfil"}),e.jsx("th",{children:"Fecha de creación"}),e.jsx("th",{children:"Cantidad de registros"}),e.jsx("th",{children:"Listado de ingreso"}),e.jsx("th",{children:"Información del cliente"}),e.jsx("th",{children:"Programar campaña"}),e.jsx("th",{children:"Acciones"})]})}),e.jsx("tbody",{children:m.map(r=>e.jsxs("tr",{children:[e.jsx("td",{children:r.nombre}),e.jsx("td",{children:C(r.created_at)}),e.jsx("td",{children:r.personas.length}),e.jsx("td",{children:e.jsx("a",{href:route("perfiles.download",{perfil:r}),className:"btn btn-sm",children:e.jsx("img",{src:y,alt:"icono de excel",width:24})})}),e.jsxs("td",{children:[e.jsx("div",{children:"V1: Segmento de valor"}),e.jsx("div",{children:"V2: Segmento transaccional"})]}),e.jsx("td",{children:e.jsx("button",{onClick:()=>j(r),children:e.jsx("img",{src:w,alt:"icono de play",width:24})})}),e.jsx("td",{children:e.jsxs("div",{className:"flex w-20 gap-1",children:[e.jsx("button",{onClick:()=>{t("Dashboard"),h(r)},children:e.jsx("img",{src:N,alt:"icono de ver",width:24})}),e.jsx("button",{onClick:()=>x(r),children:e.jsx("img",{src:S,alt:"icono de eliminar",width:24})})]})})]},r.id))})]})}),e.jsx("button",{onClick:()=>t("Form"),className:"m-auto btn btn-primary",children:"Generar nuevo perfil"}),e.jsx(o,{show:a=="Form",onClose:()=>t(""),maxWidth:"xs",children:e.jsx(b,{onSended:()=>t("Dashboard")})}),e.jsx(o,{show:a=="Dashboard",onClose:()=>t(""),maxWidth:"2xl",children:i&&e.jsx(g,{perfil:i})})]})}export{I as default};
