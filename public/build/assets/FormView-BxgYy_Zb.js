import{r as x,j as e,y as N}from"./app-D0uRgvyt.js";const b=[{attr:"edad_grupo",text:"Edad",options:[{text:"jovenes",value:"JOVEN",active:!1},{text:"adultos",value:"ADULTO",active:!1},{text:"adultos mayores",value:"ADULTO MAYOR",active:!1}],count:0},{attr:"sexo",text:"Género",options:[{text:"hombres",value:"M",active:!1},{text:"mujeres",value:"F",active:!1}],count:0},{attr:"estado_civil",text:"Estado Civil",options:[{text:"solteros",value:"SOLTERO",active:!1},{text:"casados",value:"CASADO",active:!1},{text:"divorciados",value:"DIVORCIADO",active:!1},{text:"viudos",value:"VIUDO",active:!1}],count:0},{attr:"generacion",text:"Generaciones",options:[{text:"generación x",value:"GENERACIÓN X",active:!1},{text:"millennials",value:"MILLENNIALS",active:!1},{text:"generación z",value:"GENERACIÓN Z",active:!1}],count:0},{attr:"departamento",text:"Departamentos",options:[{text:"Amazonas",value:"AMAZONAS",active:!1},{text:"ancash",value:"ANCASH",active:!1},{text:"apurimac",value:"APURIMAC",active:!1},{text:"arequipa",value:"AREQUIPA",active:!1},{text:"ayacucho",value:"AYACUCHO",active:!1},{text:"cajamarca",value:"CAJAMARCA",active:!1},{text:"callao",value:"CALLAO",active:!1},{text:"cusco",value:"CUSCO",active:!1},{text:"huancavelica",value:"HUANCAVELICA",active:!1},{text:"huanuco",value:"HUANUCO",active:!1},{text:"ica",value:"ICA",active:!1},{text:"junin",value:"JUNIN",active:!1},{text:"la libertad",value:"LA LIBERTAD",active:!1},{text:"lambayeque",value:"LAMBAYEQUE",active:!1},{text:"lima",value:"LIMA",active:!1},{text:"loreto",value:"LORETO",active:!1},{text:"madre de dios",value:"MADRE DE DIOS",active:!1},{text:"moquegua",value:"MOQUEGUA",active:!1},{text:"pasco",value:"PASCO",active:!1},{text:"piura",value:"PIURA",active:!1},{text:"puno",value:"PUNO",active:!1},{text:"san martin",value:"SAN MARTIN",active:!1},{text:"tacna",value:"TACNA",active:!1},{text:"tumbes",value:"TUMBES",active:!1},{text:"ucayali",value:"UCAYALI",active:!1}],count:0}];function j(m){const{segmento:i,onSaved:v}=m,[n,u]=x.useState(b),r=x.useMemo(()=>{let t=[];return t=n.map(a=>({attr:a.attr,text:a.text,options:a.options.filter(s=>s.active).map(s=>({text:s.text,value:s.value,active:!0})),count:0})),t=t.filter(a=>a.options.length>0),t=t.map(a=>({...a,count:i.personas.filter(s=>{const l=s[a.attr];return a.options.some(c=>c.value===l)}).length})),t},[n]),d=x.useMemo(()=>{let t=[];return t=i.personas.filter(a=>r.every(s=>{const l=a[s.attr];return s.options.some(c=>c.value===l)})),t.length},[r]);x.useEffect(()=>{const t=n.map(a=>{const s=i.filtros.find(l=>l.text===a.text);return s?{...a,options:a.options.map(l=>{const c=s.options.some(o=>o.value===l.value);return{...l,active:c}})}:a});return u(t),()=>{}},[i]);function f(t,a){const s=n.map((l,c)=>c===t?{...l,options:l.options.map((o,h)=>h===a?{...o,active:!o.active}:o)}:l);u(s)}function p(){const t=n.map(a=>({...a,options:a.options.map(s=>({...s,active:!1}))}));u(t)}function A(){const t=JSON.stringify(r);N.put(route("segmentos.update",{segmento:i}),{filtros:t},{onSuccess(){v==null||v()}})}return e.jsxs("div",{className:"p-10 bg-gray-100",children:[e.jsx("h1",{className:"title",children:"Generación de Segmentos"}),e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row",children:[e.jsxs("div",{className:"flex-1 p-8 bg-white rounded-lg",children:[e.jsx("h2",{className:"text-xl font-bold",hidden:!0,children:"Filtros"}),e.jsx("div",{className:"flex flex-wrap gap-8 mb-8",children:n.map((t,a)=>e.jsxs("div",{children:[e.jsx("h3",{className:"mb-2 text-lg font-bold text-celeste-claro",children:t.text}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.options.map((s,l)=>e.jsx("button",{onClick:()=>f(a,l),className:"capitalize btn btn-sm btn-outline "+(s.active?"active":""),children:s.text},s.value))})]},t.text))}),e.jsx("button",{onClick:p,className:"m-auto text-white btn bg-celeste-claro",children:"Reestablecer filtros"})]}),e.jsxs("div",{className:"flex flex-col pb-8 md:w-[400px]",children:[e.jsxs("div",{className:"flex-1 p-8 mb-8 text-white rounded-lg bg-azul-marino",children:[e.jsx("h2",{className:"text-2xl font-bold text-center",children:"Total de Registros"}),e.jsx("p",{className:"mb-4 text-5xl font-bold text-center text-amarillo",children:i.personas.length}),r.map((t,a)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("h3",{className:"mb-2 text-2xl font-bold text-white",children:["Filtro ",a+1," ",e.jsx("span",{className:"italic text-celeste-claro",children:t.text})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.options.map(s=>e.jsx("div",{className:"text-white capitalize border-gray-400 btn btn-sm",children:s.text},s.text))}),e.jsxs("div",{className:"text-xs text-amarillo",children:[e.jsx("span",{className:"text-xl font-bold",children:t.count})," ","Registros en total"]})]},t.text)),e.jsx("div",{className:"w-full h-px bg-celeste-claro"}),e.jsx("div",{className:"",children:e.jsxs("div",{className:"flex items-center gap-1 py-4 m-auto max-w-60",children:["Total de registros del segmento creado",e.jsx("div",{className:"text-3xl font-bold text-celeste-claro",children:":"}),e.jsx("div",{className:"text-3xl font-bold text-amarillo",children:d})]})})]}),e.jsx("button",{className:"m-auto btn btn-primary",onClick:A,children:"Generar segmento"})]})]})]})}export{j as default};
